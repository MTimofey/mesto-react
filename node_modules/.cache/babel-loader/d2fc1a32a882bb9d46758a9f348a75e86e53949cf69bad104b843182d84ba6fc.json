{"ast":null,"code":"// импорты\nimport apiAuthorizationToken from \"./apiAuthorizationToken\";\n\n// константа с Апи запросами\nclass Api {\n  constructor({\n    link,\n    headers\n  }) {\n    this._link = link;\n    this._headers = headers;\n  }\n\n  // Метод обработки ответа сервера \n  _serverResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`код ошибки: ${res.status}`);\n    }\n  }\n\n  // Метод получения данных пользователей\n  getUserData() {\n    return fetch(`${this._link}/users/me`, {\n      headers: this._headers\n    }).then(res => {\n      return this._serverResponse(res);\n    });\n  }\n\n  // Метод инициализации карточек сервера \n  getInitialCards() {\n    return fetch(`${this._link}/cards`, {\n      headers: this._headers\n    }).then(res => {\n      return this._serverResponse(res);\n    });\n  }\n\n  // Метод отправки данных пользователя\n  editCustomProfile(userProfileInfo) {\n    return fetch(`${this._link}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: userProfileInfo['userName'],\n        about: userProfileInfo.userPosition\n      })\n    }).then(res => {\n      return this._serverResponse(res);\n    });\n  }\n\n  // Добавление новой карточки\n  addNewCard(cardData) {\n    console.log(this._headers);\n    return fetch(`${this._link}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: cardData['photoName'],\n        link: cardData['link']\n      })\n    }).then(res => {\n      return this._serverResponse(res);\n    });\n  }\n\n  // Удаление карочки\n  deleteCard(cardId) {\n    return fetch(`${this._link}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: this._headers\n    }).then(res => {\n      return this._serverResponse(res);\n    });\n  }\n\n  // Лайк карточки\n  setCardLike(cardId) {\n    return fetch(`${this._link}/cards/${cardId}/likes`, {\n      method: \"PUT\",\n      headers: this._headers\n    }).then(res => {\n      return this._serverResponse(res);\n    });\n  }\n\n  // Удаление лайка\n  deleteCardLike(cardId) {\n    return fetch(`${this._link}/cards/${cardId}/likes`, {\n      method: \"DELETE\",\n      headers: this._headers\n    }).then(res => {\n      return this._serverResponse(res);\n    });\n  }\n\n  // Аватар(короля) поля фотографии\n  updateAvatar(avatarLink) {\n    return fetch(`${this._link}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: avatarLink.avatar\n      })\n    }).then(res => {\n      return this._serverResponse(res);\n    });\n  }\n}\nconst api = new Api(apiAuthorizationToken);\n\n// экспорт\nexport default api;","map":{"version":3,"names":["apiAuthorizationToken","Api","constructor","link","headers","_link","_headers","_serverResponse","res","ok","json","Promise","reject","status","getUserData","fetch","then","getInitialCards","editCustomProfile","userProfileInfo","method","body","JSON","stringify","name","about","userPosition","addNewCard","cardData","console","log","deleteCard","cardId","setCardLike","deleteCardLike","updateAvatar","avatarLink","avatar","api"],"sources":["/Users/Timofey/projects/mesto-react/src/utils/Api.js"],"sourcesContent":["// импорты\nimport apiAuthorizationToken from \"./apiAuthorizationToken\";\n\n// константа с Апи запросами\nclass Api {\n  constructor({ link, headers }) {\n    this._link = link;\n    this._headers = headers;\n  }\n\n  // Метод обработки ответа сервера \n  _serverResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`код ошибки: ${res.status}`);\n    }\n  }\n\n  // Метод получения данных пользователей\n  getUserData() {\n    return fetch(`${this._link}/users/me`, {\n      headers: this._headers,\n    })\n      .then((res) => {\n      return this._serverResponse(res);\n    });\n  }\n\n  // Метод инициализации карточек сервера \n  getInitialCards() {\n    return fetch(`${this._link}/cards`, {\n      headers: this._headers,\n    })\n      .then((res) => {\n      return this._serverResponse(res);\n    });\n  }\n\n  // Метод отправки данных пользователя\n  editCustomProfile(userProfileInfo) {\n    return fetch(`${this._link}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({ name: userProfileInfo['userName'], about: userProfileInfo.userPosition }),\n    })\n    .then((res) => {\n      return this._serverResponse(res);\n    });\n  }\n\n  // Добавление новой карточки\n  addNewCard(cardData) {\n    console.log(this._headers);\n    return fetch(`${this._link}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({ \n        name: cardData['photoName'],\n        link: cardData['link'], \n      }),\n    })\n    .then((res) => {\n      return this._serverResponse(res);\n    });\n  }\n  \n  // Удаление карочки\n  deleteCard(cardId) {\n    return fetch(`${this._link}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then((res) => {\n      return this._serverResponse(res);\n    });\n  }\n\n  // Лайк карточки\n  setCardLike(cardId) {\n    return fetch(`${this._link}/cards/${cardId}/likes`, {\n      method: \"PUT\",\n      headers: this._headers,\n    }).then((res) => {\n      return this._serverResponse(res);\n    });\n  }\n\n  // Удаление лайка\n  deleteCardLike(cardId) {\n    return fetch(`${this._link}/cards/${cardId}/likes`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then((res) => {\n      return this._serverResponse(res);\n    });\n  }\n\n  // Аватар(короля) поля фотографии\n  updateAvatar(avatarLink) {\n    return fetch(`${this._link}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({avatar: avatarLink.avatar}),\n    }).then((res) => {\n      return this._serverResponse(res);\n    });\n  }\n}\n\nconst api = new Api(apiAuthorizationToken)\n\n// экспорт\nexport default api\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}